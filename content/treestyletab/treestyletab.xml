<?xml version="1.0"?>

<bindings xmlns="http://www.mozilla.org/xbl"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	xmlns:xbl="http://www.mozilla.org/xbl">

	<binding id="tab-icon"
		display="xul:stack">
		<content>
			<xul:image xbl:inherits="validate,src" class="tab-icon-image"/>
			<xbl:children/>
		</content>
	</binding>

	<binding id="toolbar"
		extends="chrome://global/content/bindings/toolbar.xml#toolbar">
		<content><xul:hbox flex="1"
		                   xbl:inherits="orient"
		                   anonid="toolbar-innerbox"
		                   class="treestyletab-toolbar-inner-box"><xbl:children/></xul:hbox></content>
		<implementation>
			<constructor><![CDATA[
				// If the binding is unexpectedly re-assigned, then
				// the size of the inner box is lost.
				// So we have to update it immediately.
				// See: https://github.com/piroor/treestyletab/issues/538
				if (gBrowser.treeStyleTab)
					gBrowser.treeStyleTab.updateFloatingTabbar(gBrowser.treeStyleTab.kTABBAR_UPDATE_BY_APPEARANCE_CHANGE);
			]]></constructor>
			<field name="treeStyleTabToolbarInnerBox" readonly="true">
				document.getAnonymousElementByAttribute(this, 'anonid', 'toolbar-innerbox')
			</field>
		</implementation>
	</binding>

	<binding id="toolbar-drag"
		extends="chrome://global/content/bindings/toolbar.xml#toolbar-drag">
		<content><xul:hbox flex="1"
		                   xbl:inherits="orient"
		                   anonid="toolbar-innerbox"
		                   class="treestyletab-toolbar-inner-box"><xbl:children/></xul:hbox></content>
		<implementation>
			<constructor><![CDATA[
				// If the binding is unexpectedly re-assigned, then
				// the size of the inner box is lost.
				// So we have to update it immediately.
				// See: https://github.com/piroor/treestyletab/issues/538
				if (gBrowser.treeStyleTab)
					gBrowser.treeStyleTab.updateFloatingTabbar(gBrowser.treeStyleTab.kTABBAR_UPDATE_BY_APPEARANCE_CHANGE);
			]]></constructor>
			<field name="treeStyleTabToolbarInnerBox" readonly="true">
				document.getAnonymousElementByAttribute(this, 'anonid', 'toolbar-innerbox')
			</field>
		</implementation>
	</binding>

</bindings>
